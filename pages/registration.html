<html>
<head>
	<title>Registration</title>
	<link rel="stylesheet" type="text/css" href="../assets/css/registrationStyle.css">
</head>
<body>


    <div class="titleContainer">
        <h2>Inserisci i tuoi dati per registrarti</h2>
    </div>

<div class="registrationArea"> 
    
	<form method="post" action="../backend/registrationManager.php">
        
        <p>
            <label for="name">Nome
                <input id="name" type="text" name="name"  required onchange="validateName(this)"/>
            </label>
            </p>
		
            <p>
                <label for="surname">Cognome
                    <input type="text" name="surname"  required onchange="validateName(this)"/>
                </label>
                </p>

                <p>
                    <label for="taxIdCode">Codice fiscale
                        <input type="text" name="taxIdCode"  required onchange="validateTaxId(this)"/>
                    </label>
                    </p>


            <p>
		<label for="username">Username
			<input type="text" name="username"  required onchange="validateUsername(this)"/>
		</label>
		</p>
		<p>
		<label for="password">Password
			<input type="password" name="password"  required onchange="validate(this)"/>
		</label>

		</p>

        <p>
            <label for="passwordConfirm">Conferma password
                <input type="password" name="passwordConfirm"  required onchange="validate(this)"/>
            </label>
    
            </p>
		<p>
		<input type="submit" name="send" value="Invia" class="sendData"/>
		</p>
	</form>

	<p id="submmit">Vuoi diventare un arbitro? <a href="./request.html">Unisciti a noi!</a></p>

</div>


<script type="text/javascript">

    //verifica se nello username è contenuto il nome inserito dall'utente
    function validateUsername(username) {
        let name = document.getElementById("name").value;
        //document.write("Il nome inserito è " + name.value);
        if(username.value.includes(name))
            alert("Lo username non puo' contenere il nome");

        if(username.length < 2 || username.length > 15)
            alert("Lo username deve avere un minimo di 2 ed un massimo di 15 caratteri");

    }


   

    //controlla se sono presenti caratteri speciali
    function checkSpecial(str){
        str = str.value;
        const special = "|!£$%&/()=?'^+*§°#ç@.:-_,;<>\"  ";

        let flag = false;

        for(let i = 0; i < str.length; i++) {
            if(special.includes(str[i]))
                return true;       
                    
            }

        return false;
    }

	//verifico che la lunghezza di nome e cognome sia compresa tra 2 e 30
    //verifico che nome e cognome non abbiano caratteri speciali
	function validateName(str) {	
		if(str.value.length < 2 || str.value.length > 30 || checkSpecial(str))
		    alert("Nome e cognome\n Devono avere minimo 2 e massimo 30 caratteri\n Non possono contenere caratteri speciali ");
    
        
    }
    

        //verifico che la lunghezza del codice fiscale sia pari a 16
        //verifico che non ci siano caratteri speciali
    function validateTaxId(taxId) {
        const len = 16;

        if(taxId.value.length != len || checkSpecial(taxId))
            alert("Codice fiscale\n Deve avere una lunghezza di 16 caratteri\n Non deve contenere caratteri speciali");
    }


	



</script>


</body>
</html>
